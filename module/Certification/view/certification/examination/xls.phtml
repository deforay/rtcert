<?php

use Zend\Debug\Debug;
use Zend\Session\Container;
$sessionLogin = new Container('credo');
// Debug::dump($country);die;
?>

<link rel="stylesheet" type="text/css" href="<?php echo $this->basePath('assets/lib/select2/css/select2.min.css'); ?>"/>
<link rel="stylesheet" type="text/css" href="<?php echo $this->basePath('assets/css/dataTables.bootstrap.min.css'); ?>"/>
<link rel="stylesheet" href="<?php echo $this->basePath('assets/css/daterangepicker-bs3.css'); ?>" type="text/css"/>

<link rel="stylesheet" href="<?php echo $this->basePath('assets/css/jquery.multiselect.css'); ?>" type="text/css"/>
<script src="<?php echo $this->basePath('assets/js/jquery.js'); ?>" type="text/javascript"></script>
<script src="<?php echo $this->basePath('assets/js/jquery-ui.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo $this->basePath('assets/js/jquery.multiselect.js'); ?>" type="text/javascript"></script>

<div class="am-content">

    <div class="page-head">
        <div class="row">
            <div class="col-sm-4"> <h2>Examination Reports</h2></div>

        </div>
    </div>
    <div class="main-content">
        <ul class="nav nav-tabs" id="examinationTab" role="tablist">
            <li class="nav-item active">
                <a class="nav-link active" id="online-tab" data-toggle="tab" href="#online-test" role="tab" aria-controls="online-test" aria-selected="false" onclick="onlineTest();">Online Tests</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="practical-tab" data-toggle="tab" href="#practical-test" role="tab" aria-controls="practical-test" aria-selected="true" onclick="practicalTest();">Practical Tests</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="written-tab" data-toggle="tab" href="#written-test" role="tab" aria-controls="written-test" aria-selected="false" onclick="writtenTest();">Written Tests</a>
            </li>
        </ul>
        <div class="tab-content" id="examinationContent">
            <div class="tab-pane active" id="online-test" role="tabpanel" aria-labelledby="online-tab">
                <div class="widget widget-small">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="panel panel-default">
                                <form action="<?php $this->url('examination', array('action' => 'xls')); ?>" name="form" method="post" >
                                    <div class="col-lg-6">
                                        <label for="Country">Country</label>
                                        <select name="country" class="form-control" autocomplete="off" id="Country" onclick="emptyInput(this)" onchange="showRegion(this.value)">
                                            <option value="" selected>Please Choose a Country</option>
                                            <?php foreach($country as $crow) { ?>
                                                <option value="<?php echo $crow['country_id'];?>" <?php echo ($crow['country_id'] == 1)?"selected='selected'":'';?>><?php echo $crow['country_name'];?></option>
                                            <?php } ?>
                                        </select>                            
                                    </div>

                                    <div class="col-lg-6">
                                        <label for="Region">Province</label>
                                        <select name="region" class="form-control" autocomplete="off" id="Region" onclick="emptyInput(this)" onchange="showDistrict(this.value)">
                                            <option value="">Please choose a Country</option>
                                        </select>                                                                    
                                    </div>
                                    <div class="col-lg-6">
                                        <label for="District">Districts</label>
                                        <select name="district" class="form-control" id="District" autocomplete="off" onclick="emptyInput(this)" onchange="showFacilities(this.value)">
                                            <option value="">Please Choose a District</option>
                                        </select>                                                                    
                                    </div>
                                    
                                    <div class="col-lg-12" style="margin-top: 30px;text-align:center;">
                                        <a class="btn btn-space btn-primary" href="javascript:void(0);" onclick="getReportOnlineTest();">GET REPORT</a>
                                        <a class="btn btn-space btn-default" role="button" href="<?php echo $this->url('examination', array('action' => 'xls')); ?>" >CANCEL</a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="practical-test" role="tabpanel" aria-labelledby="practical-tab">
                <div class="widget widget-small">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="panel panel-default">
                                <form action="<?php $this->url('examination', array('action' => 'xls')); ?>" name="form" method="post" >
                                    <div class="col-lg-6">
                                        <label for="Country">Country</label>
                                        <select name="country" class="form-control" autocomplete="off" id="Country" onclick="emptyInput(this)" onchange="showRegion(this.value)">
                                            <option value="" selected>Please Choose a Country</option>
                                            <?php foreach($country as $crow) { ?>
                                                <option value="<?php echo $crow['country_id'];?>" <?php echo ($crow['country_id'] == 1)?"selected='selected'":'';?>><?php echo $crow['country_name'];?></option>
                                            <?php } ?>
                                        </select>                            
                                    </div>

                                    <div class="col-lg-6">
                                        <label for="Region">Province</label>
                                        <select name="region" class="form-control" autocomplete="off" id="Region" onclick="emptyInput(this)" onchange="showDistrict(this.value)">
                                            <option value="">Please choose a Country</option>
                                        </select>                                                                    
                                    </div>
                                    <div class="col-lg-6">
                                        <label for="District">Districts</label>
                                        <select name="district" class="form-control" id="District" autocomplete="off" onclick="emptyInput(this)" onchange="showFacilities(this.value)">
                                            <option value="">Please Choose a District</option>
                                        </select>                                                                    
                                    </div>
                                    
                                    <div class="col-lg-12" style="margin-top: 30px;text-align:center;">
                                        <a class="btn btn-space btn-primary" href="javascript:void(0);" onclick="getReportOnlineTest();">GET REPORT</a>
                                        <a class="btn btn-space btn-default" role="button" href="<?php echo $this->url('examination', array('action' => 'xls')); ?>" >CANCEL</a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="written-test" role="tabpanel" aria-labelledby="written-tab">
                <div class="widget widget-small">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="panel panel-default">
                                <form action="<?php $this->url('examination', array('action' => 'xls')); ?>" name="form" method="post" >
                                    <div class="col-lg-6">
                                        <label for="Country">Country</label>
                                        <select name="country" class="form-control" autocomplete="off" id="Country" onclick="emptyInput(this)" onchange="showRegion(this.value)">
                                            <option value="" selected>Please Choose a Country</option>
                                            <?php foreach($country as $crow) { ?>
                                                <option value="<?php echo $crow['country_id'];?>" <?php echo ($crow['country_id'] == 1)?"selected='selected'":'';?>><?php echo $crow['country_name'];?></option>
                                            <?php } ?>
                                        </select>                            
                                    </div>

                                    <div class="col-lg-6">
                                        <label for="Region">Province</label>
                                        <select name="region" class="form-control" autocomplete="off" id="Region" onclick="emptyInput(this)" onchange="showDistrict(this.value)">
                                            <option value="">Please choose a Country</option>
                                        </select>                                                                    
                                    </div>
                                    <div class="col-lg-6">
                                        <label for="District">Districts</label>
                                        <select name="district" class="form-control" id="District" autocomplete="off" onclick="emptyInput(this)" onchange="showFacilities(this.value)">
                                            <option value="">Please Choose a District</option>
                                        </select>                                                                    
                                    </div>
                                    
                                    <div class="col-lg-12" style="margin-top: 30px;text-align:center;">
                                        <a class="btn btn-space btn-primary" href="javascript:void(0);" onclick="getReportOnlineTest();">GET REPORT</a>
                                        <a class="btn btn-space btn-default" role="button" href="<?php echo $this->url('examination', array('action' => 'xls')); ?>" >CANCEL</a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDhZa4hDifE6p2sbaxJehS7gcrZOJScIqM&libraries=drawing,geometry,places"></script>

    <script src="<?php echo $this->basePath('assets/js/maplace.min.js'); ?>" type="text/javascript"></script>
    <script src="<?php echo $this->basePath('assets/lib/select2/js/select2.min.js'); ?>" type="text/javascript"></script>


    <script src="<?php echo $this->basePath('assets/js/highcharts.js'); ?>"></script>
    <script src="<?php echo $this->basePath('assets/js/highcharts-more.js'); ?>"></script>
    <script src="<?php echo $this->basePath('assets/js/pattern-fill.js'); ?>"></script>

    <script type="text/javascript" src="<?php echo $this->basePath('assets/js/jquery.dataTables.min.js'); ?>"></script>
    <script type="text/javascript" src="<?php echo $this->basePath('assets/js/dataTables.bootstrap.min.js'); ?>"></script>
    <script src="<?php echo $this->basePath('assets/js/daterangepicker.js'); ?>" type="text/javascript"></script>
    <script type="text/javascript" src="<?php echo $this->basePath('assets/js/jquery.blockUI.min.js'); ?>"></script>
    <script type="text/javascript" src="<?php echo $this->basePath('assets/js/personnel_certification/certification.js'); ?>"></script>
    <script>
    $(document).ready(function () {
        $("#Country").val(1);
        showRegion(1);
    });
    function showRegion(str) {
            if (str == "") {
               document.getElementById("Region").innerHTML = "<option value=''>Please Choose a Region</option>";
               document.getElementById("District").innerHTML = "<option value=''>Please Choose a District</option>";
              return false;
            }else{
                $.post("<?php echo $this->url('provider', array('action' => 'region')); ?>", {q: str},
                function(data) {
                   document.getElementById("Region").innerHTML = data;
                   document.getElementById("District").innerHTML = "<option value=''>Please Choose a District</option>";
                });
            }
    }
    
    function showDistrict(str) {
        if (str == "") {
            document.getElementById("District").innerHTML = "Please Choose a Region First";
            return;
        } else {
            if (window.XMLHttpRequest) {
                // code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            } else {
                // code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("District").innerHTML = this.responseText;
                }
            };
            xmlhttp.open("GET", "<?php echo $this->url('provider', array('action' => 'district')); ?>?q=" + str, true);
            xmlhttp.send();
        }
    }

    function getReportOnlineTest(){
        $.post("<?php echo $this->url('examination', array('action' => 'get-report')); ?>", {
            Region: $('#Region').val(),District: $('#District').val(),Country: $('#Country').val(),Exam: 'practical-exam'
        },function(data) {
        
        });
    }
    </script>